# =============================================================================
# common.yml — 共通パラメータ（全ケースで共通する設定）
# =============================================================================
# 役割: 窓幅・どの平滑化を評価するか・point の ON/OFF・グラフの見た目をまとめて書く。
# 実験では主に smoothing の include_point / kernels_to_evaluate と plot の ylim を触るとよい。

smoothing:
  # --- 窓幅（どちらか一方を指定。両方書いた場合は window_m を優先）---
  window_m: 4.0
  #   窓幅を実距離 [m] で指定。区間中央を中心にこの幅の窓で平滑化する。
  #   例: 4.0 なら区間中心から左右 2 m ずつ、合計 4 m の範囲の代表値（平均・中央値など）を計算。
  #   位置列のサンプリング間隔から点数に換算し、奇数長・中央揃えの rolling で適用する。
  # window_interval_ratio: 2.0
  #   窓幅を解析区間長（end_m - start_m）の倍数で指定。ケースごとに区間長が違うときの相対窓サイズに便利。

  default_kernel: gaussian
  #   代表値算出のデフォルトで使うカーネル名（主に内部参照用。評価は kernels_to_evaluate で行う）。

  include_point: true
  #   true: 区間中央の1点そのまま（平滑化なし）も評価・グラフに含める。
  #   false: 含めない（平滑化カーネルのみ）。レポートで「1点 vs 平滑化」を比べたいときは true、平滑化だけ比べたいときは false。

  kernels_to_evaluate:
  #   理論値と比べる「代表値の取り方」のリスト。ここに書いたものだけが RMSE とグラフに登場。
  #   moving_average=窓内単純平均, median=窓内中央値（外れ値に強い）, gaussian=ガウス重み付き平均（中心ほど重い）。
    # - median          # 中央値。外れ値に強い。
    - moving_average  # 単純移動平均（一様重み）。
    # - gaussian        # ガウス重み付き移動平均。σ は gaussian_sigma_ratio で制御。
    # - triangular      # 三角重み（中心で最大、端で0）。
    # - epanechnikov    # Epanechnikov カーネル。滑らかで有限台。
    # - hann            # Hann 窓。端が0で滑らかに減衰。

  gaussian_sigma_ratio: 0.25
  #   Gaussian カーネルの「広がり」の目安。窓幅（点数）× この比率。小さいほど中心寄り、大きいほど滑らか。

conversion:
  # 伸縮ひずみ ε → せん断ひずみ γ_s の換算式（ε の正負で式を切替）。現状は geometric 固定。
  #   ε ≥ 0: γ_s = √((ε+1)² − 1)   ε < 0: γ_s = √(1 − (ε+1)²)
  formula: geometric

plot:
  # --- グラフの見た目（レポート用にサイズ・解像度・フォントを変えたいときに編集）---
  figure_size: [8, 5]     # [幅, 高さ] インチ。縦横比はこれで決まる
  aspect_ratio: 1.5       # figure_size 未指定時の参考
  dpi: 300                # 保存時の解像度（dots per inch）。大きいほど高解像度

  font_size: 10            # 共通デフォルト（pt）
  font_axis_label: 10      # 軸ラベル（xlabel, ylabel）のフォントサイズ
  font_title: 12           # タイトルのフォントサイズ
  font_legend: 8           # 凡例のフォントサイズ

  line_width: 2.0          # 理論線・予測線の太さ

  legend_location: upper left
  multi_case_shared_yscale: true   # 複数ケースを並べた図で、縦軸スケールを全サブプロットで揃えるか
  ylim: [0, 5.0]       # 理論 vs 予測グラフの縦軸範囲 [最小, 最大]（単位は %）。省略時は自動
